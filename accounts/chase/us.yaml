metadata:
  name: chase
  version: v1beta1
spec:
  login_script:
    steps:
      - action:
          nav:
            addr: https://www.chase.com/
      - id: username
        action:
          ask:
            prompt:
              title: Username
              component:
                input:
                  type: PASSWORD
      - id: password
        action:
          ask:
            prompt:
              title: Password
              component:
                input:
                  type: PASSWORD
      - action:
          input:
            selector: "#userId-text-input-field"
            value: "{{ username }}"
      - action:
          input:
            selector: "#password-text-input-field"
            value: "{{ password }}"
      - action:
          mouse_click:
            selector: "#signin-button"
      - action:
          mouse_click:
            selector: "#header-simplerAuth-dropdownoptions-styledselect"
      - action:
          ask:
            prompt:
              title: "Select your 2-factor method"
              component:
                dropdown:
                  merge:
                    - if: "{{ 'xxx-' not in option.value }}"
                      option:
                        disabled: true
                    - if: "{{ 'Call us' in option.value }}"
                      option:
                        hidden: true
                  from:
                    selector: "#ul-list-container-simplerAuth-dropdownoptions-styledselect > li"
                    iterator: "span[id*='container-primary']"

